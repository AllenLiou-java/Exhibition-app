import{r as b,e as M,u as A,a as E,o as Q,w as B,b as _,c as i,d as e,n as d,F as g,f as k,g as v,h as L,t as c,i as T,j as s,k as D}from"./index-85f8a41f.js";const U={class:"d-flex position-relative"},j=["checked"],H=e("p",{for:"date-valid",class:"pb-1"}," 顯示已結束展覽 ",-1),N={class:"mb-3"},R=e("p",{class:"fw-bold mb-2"},"類型",-1),q={class:"type-list rounded-3 border mb-1"},z={class:"border-bottom p-2"},G=["checked"],I=e("span",{for:"type-all"},"全部",-1),J=["onClick"],K=["id","value","checked"],O=["for"],W={class:"d-flex px-1"},X={class:"mb-2"},Y=e("p",{class:"fw-bold mb-2"},"展覽期間",-1),Z=e("p",{class:"mb-2 fw-bold"},"價格",-1),ee={class:"d-flex flex-column"},te=e("p",{class:"mb-1 fs-7"},"最小票價",-1),ae={key:1,class:"errorMessage"},le={class:"d-flex flex-column"},oe=e("p",{class:"mb-1 fs-7"},"最大票價",-1),se={key:1,class:"errorMessage"},ne=e("p",{class:"fs-7 mb-2 fw-bold"},"城市",-1),re=e("input",{class:"border w-100 rounded px-2 py-1 mb-2",type:"search",placeholder:"篩選城市名稱",name:"",id:""},null,-1),ie={class:"city-list border rounded-3"},de=["onClick"],ce=["id","value","checked"],ue=["for"],pe={class:"container"},be={__name:"SearchExhibition",setup(ve){const V=o=>{o.preventDefault()},u=b(M()),w=["臺北","新北","桃園","臺中","台南","高雄","新竹","苗栗","彰化","南投","雲林","嘉義","屏東","宜蘭","花蓮","臺東","澎湖","金門","連江","基隆"];A();const $=E(),p=b(!1),C=()=>{p.value=!p.value};Q(async()=>{u.value.exhibitionList.length===0&&await u.value.getAllExhibitionData(),F(),console.log("[BeforeMount]",u.value.exhibitionList)});const n=b({typeArr:[],typeQuantity:5}),t=b({dateValid:!1,type:"all",startDate:0,endDate:new Date().getTime()+365*24*60*60*100,minPrice:1,maxPrice:1e5,city:"all"}),F=()=>{n.value.typeArr=Array.from(new Set(u.value.exhibitionList.map(o=>o.type))),console.log("[init]")},m=(o,l)=>{console.log("click",o,l),t.value[`${o}`]=l},y=o=>{switch(o){case"add":n.value.typeQuantity+=5;break;case"reset":n.value.typeQuantity=5;break}};return B(t.value,o=>{console.log("[Fetch Filter Data]",o),console.log(typeof t.value.startDate,t.value.startDate),typeof t.value.startDate=="object"&&(t.value.startDate=new Date(t.value.startDate).getTime()),typeof t.value.endDate=="object"&&(t.value.endDate=new Date(t.value.endDate).getTime()),console.log("change",t.value),$.replace({name:"SearchExhibition",query:o})}),(o,l)=>{const h=_("DatePicker"),f=_("VeeField"),x=_("ErrorMessage"),S=_("VeeForm");return s(),i("div",U,[e("div",{class:d(`side border-end ${p.value?"w-0":"border-none"}`)},[e("div",{class:d(`m-4 ${p.value&&"d-none"}`)},[e("div",{onClick:l[0]||(l[0]=a=>m("dateValid",!t.value.dateValid)),class:"d-flex gap-2 align-items-center border-bottom pb-4 mb-4 px-3"},[e("input",{id:"date-valid",type:"checkbox",name:"checkbox",checked:t.value.dateValid},null,8,j),H]),e("div",N,[R,e("ul",q,[e("li",z,[e("div",{onClick:l[1]||(l[1]=a=>m("type","all"))},[e("input",{class:"me-2",id:"type-all",type:"radio",name:"type",value:"all",checked:t.value.type==="all"},null,8,G),I])]),(s(!0),i(g,null,k(n.value.typeArr.slice(0,n.value.typeQuantity),(a,r)=>(s(),i("li",{class:"p-2 border-bottom",key:r},[e("div",{onClick:P=>m("type",a)},[e("input",{class:"me-2",id:a,type:"radio",name:"type",value:a,checked:t.value.type===a},null,8,K),e("span",{class:"",for:a},c(a),9,O)],8,J)]))),128))]),e("div",W,[e("button",{class:d(`border-0 bg-transparent fw-bold ${n.value.typeQuantity<6&&"d-none"}`),type:"button",onClick:l[2]||(l[2]=a=>y("reset"))}," 收回 ",2),e("button",{onClick:l[3]||(l[3]=a=>y("add")),class:d(`border-0 bg-transparent fw-bold ms-auto ${n.value.typeArr.length<5&&"d-none"}`),type:"button"}," 顯示更多 ",2)])]),e("div",X,[Y,v(h,{modelValue:t.value.startDate,"onUpdate:modelValue":l[4]||(l[4]=a=>t.value.startDate=a),class:"mb-2",type:"number",placeholder:"開始時間"},null,8,["modelValue"]),v(h,{placeholder:"結束時間",modelValue:t.value.endDate,"onUpdate:modelValue":l[5]||(l[5]=a=>t.value.endDate=a)},null,8,["modelValue"])]),Z,v(S,{onSubmit:V},{default:L(({errors:a})=>[e("div",ee,[te,v(f,{modelValue:t.value.minPrice,"onUpdate:modelValue":l[6]||(l[6]=r=>t.value.minPrice=r),class:d(`border rounded py-1 px-2 ${a.最小價格?"border-danger":"border"}`),placeholder:"最小價格",name:"最小價格",type:"number",oninput:"value=value.replace(/[^\\d]/g,'')",rules:{min_value:0,max_value:t.value.maxPrice,numeric:!0}},null,8,["modelValue","class","rules"]),a.最小價格?(s(),D(x,{key:0,as:"p",class:"text-danger errorMessage",name:"最小價格"})):(s(),i("p",ae))]),e("div",le,[oe,v(f,{modelValue:t.value.maxPrice,"onUpdate:modelValue":l[7]||(l[7]=r=>t.value.maxPrice=r),class:d(`border rounded py-1 px-2 ${a.最大價格?"border-danger":"border"}`),placeholder:"最大價格",name:"最大價格",type:"number",oninput:"value=value.replace(/[^\\d]/g,'')",rules:{min_value:t.value.minPrice,max_value:1e5,numeric:!0}},null,8,["modelValue","class","rules"]),a.最大價格?(s(),D(x,{key:0,as:"p",class:"text-danger errorMessage",name:"最大價格"})):(s(),i("p",se))])]),_:1}),e("div",null,[ne,re,e("ul",ie,[(s(),i(g,null,k(w,(a,r)=>e("li",{class:"p-2 border-bottom",key:r},[e("div",{onClick:P=>m("city",a)},[e("input",{class:"me-2",id:a,type:"radio",name:"type",value:a,checked:t.value.city===a},null,8,ce),e("span",{class:"",for:a},c(a),9,ue)],8,de)])),64))])])],2)],2),e("div",pe,[e("button",{type:"button",onClick:C}," Filter "+c(p.value),1),T(" "+c(new Date(t.value.endDate))+" ",1),e("p",null,"篩選器 "+c(t.value),1),e("p",null,"展覽資料 "+c(u.value.exhibitionList.map(a=>a.location.country)),1)])])}}};export{be as default};
