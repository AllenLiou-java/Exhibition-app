import{y as D,_ as w,r as d,z as y,A as I,v as k,w as U,B as $,c,d as u,f as a,q as x,C as B,D as A,p as E,k as S,g as p}from"./index-63f73e89.js";import{U as V}from"./UserNavList-efdc19e4.js";const L=async i=>{try{return await D({method:"POST",url:"https://api.imgur.com/3/image",data:i,headers:{Authorization:"Client-ID 41da2d5848230ab"},mimeType:"multipart/form-data"})}catch(s){return console.log(s),s}};const v=i=>(E("data-v-e4d5c10f"),i=i(),S(),i),R={class:"border p-3 d-flex flex-column gap-4 rounded"},T={class:"d-flex justify-content-center"},q={class:"avatar-label border",for:"avatar"},z=["src"],C=v(()=>a("div",{class:"avatar-hover"},"點擊更改圖片",-1)),F=["disabled"],N={key:0},O={key:1},P=v(()=>a("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),j={__name:"AvatarUpload",setup(i){const s=d(!1),r=y(),m=I(r),l=d(null),_=d(null),f=k(()=>{var t;return((t=r.userData)==null?void 0:t.picture)===l.value}),h=t=>{const o=t.target.files[0],e=new FormData,n=new FileReader;e.append("image",o),n.addEventListener("load",()=>{l.value=n.result,_.value=e}),o&&n.readAsDataURL(o)},g=async t=>{var o;try{s.value=!0;const e=await L(t),n=await A((o=r.userData)==null?void 0:o.localId,{picture:e.data.data.link});return l.value=e.data.data.link,r.userData.picture=e.data.data.link,console.log("[upload imgur responses]",e.data.data.link),console.log("[upload fireBase user data]",n),n&&window.alert("圖片上傳成功"),s.value=!1,e.data.data.link}catch(e){return console.log("[upload img responses Error]",e),s.value=!1,e}},b=()=>{var t;l.value=(t=r.userData)==null?void 0:t.picture};return U(m.userData,()=>{var t;l.value=(t=r.userData)==null?void 0:t.picture}),$(()=>{b()}),(t,o)=>{var e;return c(),u("div",R,[a("div",T,[a("label",q,[a("img",{class:"avatar-img",src:l.value||((e=x(r).userData)==null?void 0:e.picture),alt:"avatar",width:"200",height:"200"},null,8,z),C]),a("input",{class:"d-none",onChange:h,type:"file",name:"avatar",id:"avatar",accept:"image/*"},null,32)]),a("button",{onClick:o[0]||(o[0]=n=>g(_.value)),class:"btn btn-dark",disabled:f.value||s.value},[s.value===!1?(c(),u("p",N,"上傳")):(c(),u("div",O,[P,B(" Loading... ")]))],8,F)])}}},H=w(j,[["__scopeId","data-v-e4d5c10f"]]),K={class:"container my-5"},M={class:"row"},Q={class:"col-12 col-md-3"},Y={class:"col-12 col-md-9"},G={class:"row"},J={class:"col-12"},W={class:"row"},X={class:"col-12 p-3 border"},Z=a("h2",{class:"border-bottom mb-4 fs-4 pb-3"},"會員資料",-1),aa={class:"col-md-4"},ea=a("div",{class:""},[a("div",null," Lorem, ipsum dolor sit amet consectetur adipisicing elit. Laboriosam eligendi odit impedit quam, voluptas nesciunt inventore repellendus ipsam id ut officiis. Facere tempora doloremque, molestiae ratione praesentium repellat voluptas deserunt? ")],-1),ta=a("div",null,null,-1),ra={__name:"UserInfo",setup(i){return d({}),(s,r)=>(c(),u("div",K,[a("div",M,[a("div",Q,[p(V)]),a("div",Y,[a("div",G,[a("div",J,[a("div",W,[a("div",X,[Z,a("div",aa,[p(H)])])]),ea]),ta])])])]))}};export{ra as default};
