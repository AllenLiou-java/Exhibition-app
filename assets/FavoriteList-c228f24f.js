import{_ as E,B as A,s as L,x as B,r as v,C,w as F,b as h,d as l,f as t,M as H,N,F as g,h as O,Q as V,z as j,c as d,g as p,i as z,D as M,t as f,p as U,k as R,S as $,U as Q}from"./index-f07718a0.js";const D=i=>(U("data-v-f4ee44e3"),i=i(),R(),i),W=D(()=>t("h1",{class:"border-bottom mb-4 fs-4 pb-3 fw-medium"},"收藏展覽",-1)),q={class:"row"},G={class:"col-md-12"},J={class:"row"},K={class:"border border-dark d-flex justify-content-between"},P={class:"d-flex"},X={class:"image-box"},Y=["src","alt"],Z={class:"p-2 d-flex flex-column justify-content-center"},m={class:"fw-bold text-hidden-1"},ee={class:"text-hidden-1 font-pathway text-info"},ae={class:"border-start border-dark p-3"},te=["onClick"],se={key:0},oe={key:1},re=D(()=>t("div",null,null,-1)),ne={__name:"FavoriteList",setup(i){const k=A(),u=L(),I=B(u),b=v(""),x=v([]),n=v([]),o=v([]),T=s=>{o.value=n.value.map(a=>a),o.value=n.value.filter(a=>a.name.includes(s.target.value))},y=async()=>{var s;try{const a=await V((s=u.userData)==null?void 0:s.localId);x.value=Object.keys(a.data).filter(r=>a.data[r]===!0)}catch(a){console.log(a)}},w=async()=>{n.value=[],x.value.forEach(async s=>{const a=await j(s);n.value.push({id:s,...a.data,isTrack:!0})}),o.value=n.value},S=async s=>{var r,_;const a=o.value.findIndex(c=>c.id===s);if(o.value[a].isTrack=!o.value[a].isTrack,o.value[a].isTrack===!0)try{await $((r=u.userData)==null?void 0:r.localId,s)}catch{k.callAlert({title:"追蹤失敗",type:"error"})}else try{await Q((_=u.userData)==null?void 0:_.localId,s)}catch{k.callAlert({title:"取消追蹤失敗",type:"error"})}};return C(async()=>{await y(),w()}),F(I.userData,()=>{y(),w()}),(s,a)=>{const r=h("router-link"),_=h("HeartIcon"),c=h("HeartOutlineIcon");return d(),l(g,null,[W,t("div",q,[t("div",G,[t("div",null,[H(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),onInput:T,class:"form-control mb-4",type:"search",placeholder:"請輸入展覽名稱"},null,544),[[N,b.value]])]),t("ul",J,[(d(!0),l(g,null,O(o.value,e=>(d(),l("li",{class:"col-md-6 mb-4",key:e==null?void 0:e.id},[t("div",K,[t("div",P,[t("div",X,[t("img",{src:e==null?void 0:e.image,alt:e==null?void 0:e.name},null,8,Y)]),t("div",Z,[t("h2",m,[p(r,{class:"text-dark",to:`/viewExhibition/${e==null?void 0:e.id}`},{default:z(()=>[M(f(e==null?void 0:e.name),1)]),_:2},1032,["to"])]),t("time",ee,f(new Date(e==null?void 0:e.startDate).toLocaleDateString())+" ~ "+f(new Date(e==null?void 0:e.endDate).toLocaleDateString()),1)])]),t("div",ae,[t("button",{onClick:ce=>S(e==null?void 0:e.id),class:"border-0 bg-transparent"},[(e==null?void 0:e.isTrack)===!0?(d(),l("div",se,[p(_,{size:36})])):(d(),l("div",oe,[p(c,{size:36})]))],8,te)])])]))),128))])])]),re],64)}}},de=E(ne,[["__scopeId","data-v-f4ee44e3"]]);export{de as default};
