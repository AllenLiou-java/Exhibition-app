import{u as G,a as L,s as V,v as z,e as N,x as $,r as d,y as T,o as j,w as q,d as _,f as a,n as H,t as l,F as M,h as O,z as A,c as p}from"./index-f07718a0.js";const J={class:"view-exhibition"},K={class:"cover-banner mb-4"},P=["src"],Q={class:"p-2 container mx-auto row flex-column flex-md-row mb-4"},U={class:"col col-md-8"},W={class:"border-bottom pb-2 mb-4 d-flex flex-wrap justify-content-between"},X={class:"d-flex flex-column font-pathway"},Y={class:"fs-2 fw-bold"},Z={class:"fs-4 fw-bold",datetime:"#"},k=a("span",null,"~",-1),aa=a("div",null,null,-1),ea={class:"mb-4"},sa={class:"col col-md-4"},ta=a("h2",{class:"text-center mb-2 border rounded-2 p-2"},"售票價格",-1),na={class:"border rounded-3 p-2 fs-5 shadow-sm mb-2"},oa={class:"ticket-choose"},la=["id","value","data-tickgroupindex","checked","onClick"],ra=["for"],ca=["data-name","disabled"],_a={__name:"ViewExhibition",setup(da){var h,b;const m=G(),C=L(),B=V(),u=z();N();const E=$(B),s=d(),r=d({...(b=(h=s.value)==null?void 0:h.tickGroup)==null?void 0:b[0]});d(!1),d([]);const v=T(()=>(console.log("[cart Data]",u.cartData),!!u.cartData.find(n=>{var o,c;return n.name===((o=s.value)==null?void 0:o.name)&&((c=n==null?void 0:n.ticketType)==null?void 0:c.ticketType)===r.value.ticketType}))),S=T(()=>v.value?"已加入購物車":"加入購物車"),I=async()=>{var n;const t=await A((n=m.params)==null?void 0:n.id);if(console.log(t),!t.data){C.push("/notFound");return}s.value=t.data,r.value=t.data.tickGroup[0]},R=t=>{r.value=t},F=()=>{var n,o;const t={id:(n=m.params)==null?void 0:n.id,name:s.value.name,startDate:s.value.startDate,endDate:s.value.endDate,image:s.value.image,ticketType:r.value,price:(o=r.value)==null?void 0:o.price,quantity:1};console.log("[buy]",t),u.addCartItem(t)};return j(async()=>{I()}),q(E.userData,()=>{}),(t,n)=>{var o,c,f,y,x,D,g,w;return p(),_("main",J,[a("section",K,[a("img",{class:H(`${!((o=s.value)!=null&&o.image)&&"blinking"}`),src:(c=s.value)==null?void 0:c.image,alt:"exh-banner-cover"},null,10,P)]),a("section",Q,[a("div",U,[a("div",W,[a("div",X,[a("h1",Y,l((f=s.value)==null?void 0:f.name),1),a("time",Z,[a("span",null,l(new Date((y=s.value)==null?void 0:y.startDate).toLocaleDateString()),1),k,a("span",null,l(new Date((x=s.value)==null?void 0:x.endDate).toLocaleDateString()),1)])]),aa]),a("p",ea,l((D=s.value)==null?void 0:D.introduce),1)]),a("div",sa,[a("div",null,[ta,a("div",na,[a("ul",null,[(p(!0),_(M,null,O((g=s.value)==null?void 0:g.tickGroup,(e,i)=>(p(),_("li",{key:i},[a("div",oa,[a("input",{class:"d-none",type:"radio",name:"售票選擇",id:e==null?void 0:e.ticketType,value:e==null?void 0:e.ticketType,"data-tickgroupindex":i,checked:i===0,onClick:ua=>R({ticketType:e==null?void 0:e.ticketType,price:e==null?void 0:e.price})},null,8,la),a("label",{class:"text-center w-100",for:e==null?void 0:e.ticketType},[a("p",null,l(e==null?void 0:e.ticketType)+" "+l(e==null?void 0:e.price),1)],8,ra)])]))),128))])]),a("button",{onClick:F,class:"btn btn-primary w-100 mb-2 addCartBtn",type:"button","data-name":(w=s.value)==null?void 0:w.name,disabled:v.value},l(S.value),9,ca)])])])])}}};export{_a as default};
