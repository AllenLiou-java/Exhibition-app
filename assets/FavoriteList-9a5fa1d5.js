import{_ as S,z as A,A as E,B as L,r as _,C as B,w as F,b as y,d as n,f as s,J as H,K as O,F as x,h as C,N as j,x as z,c as l,t as v,g as w,p as N,k as V,O as M,P as R}from"./index-82fa8da3.js";const g=d=>(N("data-v-718cce1a"),d=d(),V(),d),U=g(()=>s("h1",{class:"border-bottom mb-4 fs-4 pb-3 fw-medium"},"收藏展覽",-1)),J={class:"row"},K={class:"col-md-12"},P={class:"row"},W={class:"border border-dark d-flex justify-content-between"},$={class:"d-flex"},q={class:"image-box"},G=["src","alt"],Q={class:"p-2 d-flex flex-column justify-content-center"},X={class:"fw-bold text-hidden-1"},Y={class:"text-hidden-1 font-pathway text-info"},Z={class:"border-start border-dark p-3"},m=["onClick"],aa={key:0},ea={key:1},sa=g(()=>s("div",null,null,-1)),ta={__name:"FavoriteList",setup(d){const h=A(),i=E(),D=L(i),p=_(""),f=_([]),c=_([]),o=_([]),I=t=>{o.value=c.value.map(e=>e),o.value=c.value.filter(e=>e.name.includes(t.target.value))},b=async()=>{var t;try{const e=await j((t=i.userData)==null?void 0:t.localId);f.value=Object.keys(e.data).filter(r=>e.data[r]===!0)}catch(e){console.log(e)}},k=async()=>{c.value=[],f.value.forEach(async t=>{const e=await z(t);c.value.push({id:t,...e.data,isTrack:!0})}),o.value=c.value},T=async t=>{var r,u;const e=o.value.findIndex(a=>a.id===t);if(o.value[e].isTrack=!o.value[e].isTrack,o.value[e].isTrack===!0)try{await M((r=i.userData)==null?void 0:r.localId,t)}catch{h.callAlert({title:"追蹤失敗",type:"error"})}else try{await R((u=i.userData)==null?void 0:u.localId,t)}catch{h.callAlert({title:"取消追蹤失敗",type:"error"})}};return B(async()=>{await b(),k()}),F(D.userData,()=>{b(),k()}),(t,e)=>{const r=y("HeartIcon"),u=y("HeartOutlineIcon");return l(),n(x,null,[U,s("div",J,[s("div",K,[s("div",null,[H(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),onInput:I,class:"form-control mb-4",type:"search",placeholder:"請輸入展覽名稱"},null,544),[[O,p.value]])]),s("ul",P,[(l(!0),n(x,null,C(o.value,a=>(l(),n("li",{class:"col-md-6 mb-4",key:a==null?void 0:a.id},[s("div",W,[s("div",$,[s("div",q,[s("img",{src:a==null?void 0:a.image,alt:a==null?void 0:a.name},null,8,G)]),s("div",Q,[s("h2",X,v(a==null?void 0:a.name),1),s("time",Y,v(new Date(a==null?void 0:a.startDate).toLocaleDateString())+" ~ "+v(new Date(a==null?void 0:a.endDate).toLocaleDateString()),1)])]),s("div",Z,[s("button",{onClick:oa=>T(a==null?void 0:a.id),class:"border-0 bg-transparent"},[(a==null?void 0:a.isTrack)===!0?(l(),n("div",aa,[w(r,{size:36})])):(l(),n("div",ea,[w(u,{size:36})]))],8,m)])])]))),128))])])]),sa],64)}}},ca=S(ta,[["__scopeId","data-v-718cce1a"]]);export{ca as default};
